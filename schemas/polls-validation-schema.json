{
  "entity": "Polls",
  "description": "Publications de type sondage",
  "fields": {
    "id": {
      "type": "integer",
      "required": true,
      "auto_generated": true,
      "description": "Identifiant unique"
    },
    "question": {
      "type": "text",
      "format": "html",
      "required": true,
      "max_length": 1000,
      "description": "Question du sondage (HTML WYSIWYG)"
    },
    "imageUrl": {
      "type": "string",
      "required": false,
      "nullable": true,
      "format": "url",
      "description": "URL d'une image pour illustrer le sondage"
    },
    "answers": {
      "type": "array",
      "item_type": "string",
      "required": true,
      "min_items": 2,
      "max_items": 10,
      "description": "Réponses possibles du sondage"
    },
    "allowMultipleAnswers": {
      "type": "boolean",
      "required": false,
      "default": false,
      "description": "Autoriser plusieurs réponses par personne"
    },
    "hasDeadline": {
      "type": "boolean",
      "required": false,
      "default": false,
      "description": "Définir une date limite de vote"
    },
    "deadlineDate": {
      "type": "datetime",
      "required": false,
      "nullable": true,
      "format": "ISO8601",
      "description": "Date limite de vote"
    },
    "votingResults": {
      "type": "json",
      "required": false,
      "nullable": true,
      "structure": {
        "totalVotes": "integer",
        "results": [
          {
            "answer": "string",
            "votes": "integer",
            "percentage": "number"
          }
        ]
      },
      "description": "Résultats du sondage"
    },
    "targetResidences": {
      "type": "array",
      "item_type": "uuid",
      "required": true,
      "min_items": 1,
      "description": "Liste des résidences cibles"
    },
    "targetResidenceNames": {
      "type": "array",
      "item_type": "string",
      "required": false,
      "description": "Noms des résidences (affichage)"
    },
    "status": {
      "type": "enum",
      "required": true,
      "values": ["Brouillon", "Publié", "Programmé", "Fermé", "Archivé"],
      "description": "Statut de publication"
    },
    "publicationDate": {
      "type": "datetime",
      "required": true,
      "format": "ISO8601",
      "description": "Date de publication"
    },
    "publishLater": {
      "type": "boolean",
      "required": false,
      "default": false,
      "description": "Publication programmée"
    },
    "createdAt": {
      "type": "datetime",
      "required": true,
      "auto_generated": true,
      "description": "Date de création"
    },
    "createdBy": {
      "type": "string",
      "required": true,
      "description": "ID utilisateur créateur"
    },
    "updatedAt": {
      "type": "datetime",
      "required": false,
      "nullable": true,
      "description": "Dernière modification"
    }
  }
}